<div class="container">
    <h1>Contacts</h1>
    <div class="new-contact-container">
        <button class="primary-button" (click)="openNewContactPopup()">New Contact</button>
    </div>
    <div>
        <ul>
            @for (contact of contacts; track contact.contact) {
                <div class="list-item">
                    <div class="list-item-header">
                        <div class="contact-parameters">
                            <b>{{contact.contact.name}}</b>
                            <span>{{contact.contact.email}}</span>
                        </div>
                        <div class="contact-buttons">
                            <button class="primary-button" (click)="getDetails(contact)">
                                @if(contact.isExpanded){
                                    <span>Hide Details</span>
                                } @else {
                                    <span>Show Details</span>
                                }
                            </button>
                            <button class="primary-button">Edit</button>
                            <button class="warning-button" (click)="delete(contact.contact.id)">Delete</button>
                        </div>
                    </div>
                    @if (contact.isExpanded) {
                        <div class="list-item-details">
                            <span>Belongs to groups:</span>
                            @for(group of contact.groups; track group){
                                <span class="group">{{group.name}}</span>
                            } @empty {
                                <span>There are no groups</span>
                            }
                        </div>
                    }

                </div>
                } @empty {
                <li>There are no items.</li>
                }
        </ul>
    </div>
</div>